{
  "type": "excalidraw",
  "version": 2,
  "source": "https://excalidraw.com",
  "elements": [
    {"id": "title", "type": "text", "x": 180, "y": 30, "width": 250, "height": 32, "text": "v2 延迟物化内存布局", "fontSize": 24, "fontFamily": 4, "textAlign": "center", "strokeColor": "#1e1e1e"},

    {"id": "main-bg", "type": "rectangle", "x": 40, "y": 80, "width": 520, "height": 380, "backgroundColor": "#e9ecef", "strokeColor": "#495057", "strokeWidth": 1, "opacity": 30, "roundness": {"type": 3}},

    {"id": "data-title", "type": "text", "x": 60, "y": 100, "width": 300, "height": 24, "text": "主分支完成后必须暂存的数据:", "fontSize": 16, "fontFamily": 4, "textAlign": "left", "strokeColor": "#1971c2"},
    {"id": "data-box", "type": "rectangle", "x": 60, "y": 130, "width": 480, "height": 120, "backgroundColor": "#a5d8ff", "strokeColor": "#1971c2", "strokeWidth": 2, "roundness": {"type": 3}},
    {"id": "data-text", "type": "text", "x": 80, "y": 140, "width": 440, "height": 100, "text": "result_chunk: 100 万行 × (主列 + __global_row_index)\nsorted_indexes: 100 万 × 8 bytes = 8 MB\npermutation: 100 万 × 8 bytes = 8 MB\noffsets: 100 万 × 8 bytes = 8 MB\nrows_in_parts: 每个 part 的行号列表", "fontSize": 13, "fontFamily": 4, "textAlign": "left"},

    {"id": "diff-title", "type": "text", "x": 60, "y": 270, "width": 150, "height": 24, "text": "关键差异:", "fontSize": 16, "fontFamily": 4, "textAlign": "left", "strokeColor": "#e67700"},
    {"id": "diff-box", "type": "rectangle", "x": 60, "y": 300, "width": 480, "height": 70, "backgroundColor": "#fff3bf", "strokeColor": "#e67700", "strokeWidth": 2, "roundness": {"type": 3}},
    {"id": "diff-text", "type": "text", "x": 80, "y": 315, "width": 440, "height": 40, "text": "主分支结果必须完整暂存，等待延迟分支完成后才能合并输出\n这是 v2 内存更高的主要原因", "fontSize": 13, "fontFamily": 4, "textAlign": "left"},

    {"id": "total-box", "type": "rectangle", "x": 60, "y": 390, "width": 480, "height": 45, "backgroundColor": "#ffc9c9", "strokeColor": "#c92a2a", "strokeWidth": 2, "roundness": {"type": 3}},
    {"id": "total-text", "type": "text", "x": 150, "y": 402, "width": 300, "height": 24, "text": "总峰值内存: ~1.82 GiB", "fontSize": 18, "fontFamily": 4, "textAlign": "center", "strokeColor": "#c92a2a"}
  ],
  "appState": {"viewBackgroundColor": "#ffffff"},
  "files": {}
}
