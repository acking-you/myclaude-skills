{
  "type": "excalidraw",
  "version": 2,
  "source": "https://excalidraw.com",
  "elements": [
    {"id": "title", "type": "text", "x": 200, "y": 30, "width": 200, "height": 32, "text": "AST 重写内存布局", "fontSize": 24, "fontFamily": 4, "textAlign": "center", "strokeColor": "#1e1e1e"},

    {"id": "main-bg", "type": "rectangle", "x": 40, "y": 80, "width": 520, "height": 340, "backgroundColor": "#e9ecef", "strokeColor": "#495057", "strokeWidth": 1, "opacity": 30, "roundness": {"type": 3}},

    {"id": "sub-title", "type": "text", "x": 60, "y": 100, "width": 150, "height": 24, "text": "子查询阶段:", "fontSize": 16, "fontFamily": 4, "textAlign": "left", "strokeColor": "#1971c2"},
    {"id": "sub-box", "type": "rectangle", "x": 60, "y": 130, "width": 480, "height": 70, "backgroundColor": "#a5d8ff", "strokeColor": "#1971c2", "strokeWidth": 2, "roundness": {"type": 3}},
    {"id": "sub-text", "type": "text", "x": 80, "y": 145, "width": 440, "height": 40, "text": "Set: 100 万个 UInt64 值\n大小: 1,000,000 × 8 bytes = 8 MB", "fontSize": 14, "fontFamily": 4, "textAlign": "left"},

    {"id": "outer-title", "type": "text", "x": 60, "y": 220, "width": 150, "height": 24, "text": "外层查询阶段:", "fontSize": 16, "fontFamily": 4, "textAlign": "left", "strokeColor": "#e67700"},
    {"id": "outer-box", "type": "rectangle", "x": 60, "y": 250, "width": 480, "height": 90, "backgroundColor": "#fff3bf", "strokeColor": "#e67700", "strokeWidth": 2, "roundness": {"type": 3}},
    {"id": "outer-text", "type": "text", "x": 80, "y": 260, "width": 440, "height": 70, "text": "流式处理：读取 → 过滤 → 排序 → 输出\n排序缓冲区：100 万行 × 所有列\n但可以分批处理，不需要一次性暂存所有数据", "fontSize": 13, "fontFamily": 4, "textAlign": "left"},

    {"id": "total-box", "type": "rectangle", "x": 60, "y": 360, "width": 480, "height": 45, "backgroundColor": "#ffc9c9", "strokeColor": "#c92a2a", "strokeWidth": 2, "roundness": {"type": 3}},
    {"id": "total-text", "type": "text", "x": 150, "y": 372, "width": 300, "height": 24, "text": "总峰值内存: ~1.63 GiB", "fontSize": 18, "fontFamily": 4, "textAlign": "center", "strokeColor": "#c92a2a"}
  ],
  "appState": {"viewBackgroundColor": "#ffffff"},
  "files": {}
}
